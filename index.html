<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>AI-Driven Timetable Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Playfair+Display&display=swap" rel="stylesheet" />
  
  <link rel="stylesheet" href="styles.css">

</head>

<body>
  <nav>
    <button id="tab-admin" class="active">Admin</button>
    <button id="tab-hod">HOD Panel</button>
    <button id="tab-faculty">Faculty</button>
    <button id="tab-student">Student</button>
    <button id="tab-reports">Reports & Analytics</button>
    <button id="tab-analytics">Analytics Dashboard</button>
    <button id="tab-approval">Timetable Approval</button>
  </nav>

  <main>
   <!-- Admin Dashboard -->
    <section id="admin-view" class="active-section">
      <h1>Admin - Create Timetable</h1>
      <form id="timetable-form">
        <label>Year: <input id="input-year" type="text" placeholder="e.g. 2025" required /></label>
        <label>Branch:
          <select id="branch-select">
            <option value="CSE">CSE</option>
            <option value="ECE">ECE</option>
            <option value="IT">IT</option>
            <option value="MAE">MAE</option>
          </select>
        </label>
        <label>Sections (comma separated): <input id="input-sections" placeholder="A,B" required /></label>
        <label>CRs (comma separated): <input id="input-crs" placeholder="CR-A,CR-B" /></label>
        <label>Subjects & Faculties (one per line, comma separated):<br />
          <textarea id="input-subjects" rows="4" placeholder="Data Structures,Dr. Sharma&#10;Operating Systems,Dr. Gupta" required></textarea>
        </label>
        <label>Rooms (comma separated): <input id="input-rooms" placeholder="Room1,Room2" required /></label>
        <label>Periods (comma separated): <input id="input-periods" placeholder="09:00-10:00,10:00-11:00" required /></label>
        <label>Days (comma separated): <input id="input-days" placeholder="Monday,Tuesday,Wednesday" required /></label>
        <button type="submit">Generate Timetable</button>
      </form>
      <div id="timetable-container"></div>
      <button id="btn-export-csv" style="display:none;">Export CSV</button>
      <button id="btn-export-pdf" style="display:none;">Export PDF</button>
    </section>

    <!-- HOD Panel -->
    <section id="hod-view" style="display:none;">
      <h1>HOD Panel</h1>
      <form id="hod-login-form">
        <label>HOD Name: <input id="hod-login-name" required /></label>
        <button type="submit">Login</button>
      </form>
      <div id="hod-data-container"></div>
      <button id="hod-export-csv" style="display:none;">Export Attendance CSV</button>
      <button id="hod-export-pdf" style="display:none;">Export Attendance PDF</button>
    </section>

    <!-- Faculty Section -->
    <section id="faculty-view" style="display:none;">
      <h1>Faculty Dashboard Login</h1>
      <form id="faculty-login-form">
        <label>Faculty Name: <input id="faculty-login-name" required /></label>
        <button type="submit">Login</button>
      </form>
      <div id="faculty-timetable-container"></div>

      <!-- Attendance Marking Section -->
      <div id="attendance-section" style="margin-top: 20px; display:none;">
        <h3>Mark Attendance</h3>
        <button id="btn-capture-attendance-photo">Capture Attendance Photo & Mark Present</button>
        <video id="camera-preview" width="320" height="240" autoplay style="display:none; border: 1px solid #720404; border-radius: 8px;"></video>
        <canvas id="photo-canvas" width="320" height="240" style="display:none;"></canvas>
        <p id="attendance-status-msg"></p>
      </div>

      <!-- Pending Reschedule Requests Unchanged -->
      <div id="faculty-reschedule-requests" style="margin-top: 20px;">
        <h3>Pending Reschedule Requests</h3>
        <div id="faculty-reschedule-requests-content">
          <p>No reschedule requests.</p>
        </div>
      </div>
    </section>

    <!-- Student Section -->
      <section id="student-view" style="display:none;">
      <h1>Student Dashboard</h1>
      <label>Batch (branch): <input id="student-branch" placeholder="CSE" /></label>
      <label>Section: <input id="student-section" placeholder="A" /></label>
      <label>Enrollment ID: <input id="student-enroll" placeholder="e.g. CR-A or student ID" /></label>
      <button id="search-student">Search</button>
      <button id="cr-reschedule-btn" style="display:none; margin-top: 1rem;">Request Reschedule</button>
      <div id="student-alerts"></div>
      <div id="student-timetable"></div>
    </section>


    <!-- Reports Section, Analytics, Approval, etc. unchanged -->
     <!-- Reports Section -->
<section id="reports-view" style="display:none;">
  <h1>Reports & Analytics</h1>
  <nav id="reports-tabs">
    <button class="report-tab active" data-report="class">Class Branch Reports</button>
    <button class="report-tab" data-report="teacher">Teacher Reports</button>
    <button class="report-tab" data-report="subject">Subject Reports</button>
    <button class="report-tab" data-report="room">Room Reports</button>
  </nav>
  <div id="reports-filters">
    <label>Branch <select id="reports-branch-select"></select></label>
    <label>Section <select id="reports-section-select"></select></label>
    <button id="reports-generate-btn">Generate Report</button>
    <button id="reports-export-csv" style="display:none;">Export CSV</button>
  </div>
  <div id="reports-content"><p>Select report type and generate to see details here.</p></div>
</section>


    <!-- Analytics Section -->
    <section id="analytics-view" style="display:none;">
      <h1>Analytics Dashboard</h1>
      <label>Branch <select id="analytics-branch-select"><option value="">-- Select Branch --</option></select></label>
      <button id="analytics-generate-btn">Generate Analytics</button>
      <div id="analytics-content" style="display:flex; flex-wrap: wrap; gap: 2rem; justify-content: center;"></div>
    </section>

    <!-- Timetable Approval Section -->
    <section id="approval-view" style="display:none;">
      <h1>Timetable Approval and Class Reschedule</h1>
      <div id="approval-timetable-container"></div>
      <button id="approval-reschedule-btn" style="display:none;">Request Reschedule</button>

      <div id="approval-reschedule-popup" style="display:none; background: #fff1e8; border:1px solid #b0183d; padding: 1rem; border-radius: 12px; margin-top: 1rem;">
        <h3>Send Class Reschedule Request</h3>
        <form id="reschedule-form">
          <label>Choose Day: <select id="reschedule-day"></select></label>
          <label>Choose Period: <select id="reschedule-period"></select></label>
          <label>Faculty Name: <input id="reschedule-faculty" required /></label>
          <label>Reason/Detail: <textarea id="reschedule-detail" rows="2"></textarea></label>
          <button type="submit">Send Email</button>
          <button type="button" onclick="closeReschedulePopup()">Cancel</button>
        </form>
      </div>
      <div id="approval-msg"></div>
    </section>

  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="script.js"></script>
</body>

</html>
